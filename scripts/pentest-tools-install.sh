#!/usr/bin/env bash

### DEFAULT
TOOLS_REPOS="tools-repos.txt"

function gem_install() {
    _gem_packages=(haiti-hash)

    local GEM_INSTALL=$(sudo gem install ${_gem_packages[@]})
    if [[ $? != 0 ]]; then
        echo "Error: gem install error"
        echo ${GEM_INSTALL}
        exit 1
    fi
}

function tools_repos_download() {
    while read line; do
        local tool_folder_name=$(echo ${line} | sed 's/\.git/ /' | awk -F'/' '{print $5}')
        mkdir /opt/${tool_folder_name}
        git clone ${line} /opt/${tool_folder_name}
    done < ${TOOLS_REPOS}
}

function main() {
    gem_install
    tools_repos_download
}

main